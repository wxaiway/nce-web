# å¼€å‘æŒ‡å—

æ¬¢è¿å‚ä¸ NCE é¡¹ç›®çš„å¼€å‘ï¼æœ¬æ–‡æ¡£æä¾›äº†å¼€å‘ç›¸å…³çš„æŒ‡å—å’Œæœ€ä½³å®è·µã€‚

## ğŸ“ é¡¹ç›®ç»“æ„

```
NCE/
â”œâ”€â”€ src/                    # æºä»£ç 
â”‚   â”œâ”€â”€ js/
â”‚   â”‚   â”œâ”€â”€ core/          # æ ¸å¿ƒæ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ lrc-parser.js      # LRC è§£æ
â”‚   â”‚   â”‚   â””â”€â”€ audio-player.js    # éŸ³é¢‘æ’­æ”¾
â”‚   â”‚   â”œâ”€â”€ ui/            # UI ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ settings-panel.js  # è®¾ç½®é¢æ¿
â”‚   â”‚   â”‚   â””â”€â”€ shortcuts.js       # å¿«æ·é”®
â”‚   â”‚   â”œâ”€â”€ utils/         # å·¥å…·å‡½æ•°
â”‚   â”‚   â”‚   â”œâ”€â”€ event-emitter.js   # äº‹ä»¶ç³»ç»Ÿ
â”‚   â”‚   â”‚   â””â”€â”€ storage.js         # æœ¬åœ°å­˜å‚¨
â”‚   â”‚   â”œâ”€â”€ app.js         # å…¨å±€åº”ç”¨
â”‚   â”‚   â””â”€â”€ lesson.js      # è¯¾æ–‡é¡µå…¥å£
â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â””â”€â”€ styles.css     # æ ·å¼æ–‡ä»¶
â”‚   â”œâ”€â”€ index.html         # é¦–é¡µ
â”‚   â”œâ”€â”€ lesson.html        # è¯¾æ–‡é¡µ
â”‚   â””â”€â”€ book.html          # é‡å®šå‘é¡µ
â”œâ”€â”€ public/                # é™æ€èµ„æº
â”‚   â”œâ”€â”€ NCE1/              # ç¬¬ä¸€å†ŒéŸ³é¢‘å’Œå­—å¹•
â”‚   â”œâ”€â”€ NCE2/              # ç¬¬äºŒå†Œ
â”‚   â”œâ”€â”€ NCE3/              # ç¬¬ä¸‰å†Œ
â”‚   â”œâ”€â”€ NCE4/              # ç¬¬å››å†Œ
â”‚   â””â”€â”€ static/
â”‚       â””â”€â”€ data.json      # è¯¾ç¨‹å…ƒæ•°æ®
â”œâ”€â”€ dist/                  # æ„å»ºè¾“å‡º
â”œâ”€â”€ package.json
â”œâ”€â”€ vite.config.js
â””â”€â”€ README.md
```

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **æ„å»ºå·¥å…·**: Vite 5.x
- **è¯­è¨€**: çº¯åŸç”Ÿ JavaScript (ES6+)
- **æ ·å¼**: åŸç”Ÿ CSS (CSS Variables)
- **æ¶æ„**: æ¨¡å—åŒ–è®¾è®¡ï¼Œé›¶è¿è¡Œæ—¶ä¾èµ–

## ğŸš€ å¼€å‘ç¯å¢ƒè®¾ç½®

### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/wxaiway/nce-web.git
cd nce-web
```

### 2. å®‰è£…ä¾èµ–

```bash
npm install
```

### 3. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
npm run dev
```

è®¿é—® http://localhost:8080

### 4. æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
# ä½¿ç”¨æ„å»ºè„šæœ¬ï¼ˆæ¨èï¼‰
./build.sh

# æˆ–ç›´æ¥æ„å»º
npm run build
```

## ğŸ“ ä»£ç è§„èŒƒ

### ä»£ç æ£€æŸ¥å’Œæ ¼å¼åŒ–

```bash
# ä»£ç æ£€æŸ¥
npm run lint

# è‡ªåŠ¨ä¿®å¤
npm run lint:fix

# ä»£ç æ ¼å¼åŒ–
npm run format
```

### ç¼–ç è§„èŒƒ

1. ä½¿ç”¨ ES6+ æ¨¡å—è¯­æ³•ï¼ˆimport/exportï¼‰
2. ä½¿ç”¨ JSDoc æ³¨é‡Šè¯´æ˜å‡½æ•°å’Œç±»
3. éµå¾ªç°æœ‰ä»£ç é£æ ¼
4. å˜é‡å’Œå‡½æ•°ä½¿ç”¨é©¼å³°å‘½å
5. ç±»åä½¿ç”¨å¸•æ–¯å¡å‘½å

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### æ¨¡å—åŒ–è®¾è®¡

é¡¹ç›®é‡‡ç”¨æ¨¡å—åŒ–æ¶æ„ï¼ŒèŒè´£æ¸…æ™°åˆ†ç¦»ï¼š

- **core/**: æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼ˆLRC è§£æã€éŸ³é¢‘æ’­æ”¾ï¼‰
- **ui/**: UI ç»„ä»¶ï¼ˆè®¾ç½®é¢æ¿ã€å¿«æ·é”®ï¼‰
- **utils/**: é€šç”¨å·¥å…·ï¼ˆäº‹ä»¶ç³»ç»Ÿã€æœ¬åœ°å­˜å‚¨ï¼‰

### äº‹ä»¶é©±åŠ¨

ä½¿ç”¨ EventEmitter å®ç°ç»„ä»¶é—´é€šä¿¡ï¼Œé¿å…ç´§è€¦åˆã€‚

## ğŸ“š æ ¸å¿ƒæ¨¡å— API

### LRCParser

LRC å­—å¹•è§£æå™¨ï¼Œæ”¯æŒä¸¤ç§æ ¼å¼ï¼š

```javascript
import { LRCParser } from './core/lrc-parser.js';

const { meta, items } = LRCParser.parse(lrcText);
```

**è¿”å›å€¼**ï¼š
- `meta`: å…ƒæ•°æ®å¯¹è±¡ï¼ˆti, ar, al ç­‰ï¼‰
- `items`: å¥å­æ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å« `{ start, end, en, cn }`

### AudioPlayer

éŸ³é¢‘æ’­æ”¾æ§åˆ¶å™¨ï¼ŒåŸºäºäº‹ä»¶é©±åŠ¨ï¼š

```javascript
import { AudioPlayer } from './core/audio-player.js';

const player = new AudioPlayer(audioElement, items);

// ç›‘å¬äº‹ä»¶
player.on('sentencechange', ({ idx }) => {
  console.log('å½“å‰å¥å­:', idx);
});

// æ’­æ”¾æŒ‡å®šå¥å­
player.playSegment(0);
```

**ä¸»è¦æ–¹æ³•**ï¼š
- `playSegment(idx, manual)`: æ’­æ”¾æŒ‡å®šå¥å­
- `prev()`: ä¸Šä¸€å¥
- `next()`: ä¸‹ä¸€å¥
- `replay()`: é‡æ’­å½“å‰å¥

**ä¸»è¦äº‹ä»¶**ï¼š
- `sentencechange`: å¥å­åˆ‡æ¢
- `lessonend`: è¯¾ç¨‹ç»“æŸ
- `error`: é”™è¯¯

### EventEmitter

ç®€å•çš„äº‹ä»¶ç³»ç»Ÿï¼š

```javascript
import { EventEmitter } from './utils/event-emitter.js';

const emitter = new EventEmitter();
emitter.on('event', (data) => console.log(data));
emitter.emit('event', { message: 'Hello' });
```

### Storage

æœ¬åœ°å­˜å‚¨å·¥å…·ï¼Œè‡ªåŠ¨å¤„ç† JSON åºåˆ—åŒ–ï¼š

```javascript
import { Storage } from './utils/storage.js';

Storage.set('key', { value: 123 });
const data = Storage.get('key');
```

## ğŸ¯ æ·»åŠ æ–°åŠŸèƒ½

### æ­¥éª¤

1. åœ¨ `src/js/` å¯¹åº”ç›®å½•åˆ›å»ºæ¨¡å—
2. ä½¿ç”¨ ES6 æ¨¡å—å¯¼å…¥/å¯¼å‡º
3. éµå¾ªç°æœ‰ä»£ç é£æ ¼
4. æ·»åŠ å¿…è¦çš„ JSDoc æ³¨é‡Š
5. æµ‹è¯•åŠŸèƒ½æ˜¯å¦æ­£å¸¸
6. æäº¤ Pull Request

### ç¤ºä¾‹ï¼šæ·»åŠ æ–°çš„ UI ç»„ä»¶

```javascript
// src/js/ui/my-component.js

/**
 * æˆ‘çš„ç»„ä»¶
 */
export class MyComponent {
  constructor() {
    this.init();
  }

  init() {
    // åˆå§‹åŒ–é€»è¾‘
  }
}
```

## ğŸ› è°ƒè¯•æŠ€å·§

### å¼€å‘è€…å·¥å…·

- ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·çš„ Console æŸ¥çœ‹æ—¥å¿—
- ä½¿ç”¨ Network é¢æ¿æ£€æŸ¥èµ„æºåŠ è½½
- ä½¿ç”¨ Application é¢æ¿æŸ¥çœ‹ LocalStorage

### å¸¸è§é—®é¢˜

1. **éŸ³é¢‘ä¸æ’­æ”¾**ï¼šæ£€æŸ¥æµè§ˆå™¨è‡ªåŠ¨æ’­æ”¾ç­–ç•¥
2. **æ ·å¼é”™è¯¯**ï¼šæ£€æŸ¥ CSS Variables æ˜¯å¦æ­£ç¡®
3. **è·¯å¾„ 404**ï¼šæ£€æŸ¥ `vite.config.js` ä¸­çš„ `base` é…ç½®

## ğŸ§ª æµ‹è¯•

### æ‰‹åŠ¨æµ‹è¯•æ¸…å•

- [ ] é¦–é¡µè¯¾ç¨‹åˆ—è¡¨æ˜¾ç¤ºæ­£å¸¸
- [ ] ç‚¹å‡»è¯¾ç¨‹èƒ½æ­£å¸¸è·³è½¬
- [ ] éŸ³é¢‘æ’­æ”¾æ­£å¸¸
- [ ] å¥å­é«˜äº®å’Œæ»šåŠ¨æ­£å¸¸
- [ ] å¿«æ·é”®åŠŸèƒ½æ­£å¸¸
- [ ] è®¾ç½®é¢æ¿åŠŸèƒ½æ­£å¸¸
- [ ] å­¦ä¹ è¿›åº¦ä¿å­˜æ­£å¸¸
- [ ] ç§»åŠ¨ç«¯é€‚é…æ­£å¸¸
- [ ] iOS Safari å…¼å®¹æ€§æ­£å¸¸

### æµè§ˆå™¨å…¼å®¹æ€§

- Chrome/Edge (æœ€æ–°ç‰ˆ)
- Firefox (æœ€æ–°ç‰ˆ)
- Safari (æœ€æ–°ç‰ˆ)
- iOS Safari (iOS 14+)

## ğŸ“¦ æ„å»ºå’Œéƒ¨ç½²

### æ„å»ºé…ç½®

é¡¹ç›®ä½¿ç”¨ Vite æ„å»ºï¼Œé…ç½®æ–‡ä»¶ï¼š`vite.config.js`

**é‡è¦é…ç½®**ï¼š
- `base`: éƒ¨ç½²è·¯å¾„ï¼ˆé»˜è®¤ `/nce/`ï¼‰
- `publicDir`: é™æ€èµ„æºç›®å½•
- `outDir`: è¾“å‡ºç›®å½•

### éƒ¨ç½²

è¯¦ç»†éƒ¨ç½²è¯´æ˜è¯·æŸ¥çœ‹ [DEPLOY.md](DEPLOY.md)

## ğŸ¤ è´¡çŒ®æµç¨‹

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æäº¤ Pull Request

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœ‰é—®é¢˜ï¼Œè¯·ï¼š
- æŸ¥çœ‹ [README.md](README.md)
- æŸ¥çœ‹ [DEPLOY.md](DEPLOY.md)
- æäº¤ GitHub Issue

## ğŸ“„ è®¸å¯è¯

MIT License
